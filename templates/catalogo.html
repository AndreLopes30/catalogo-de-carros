<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Catálogo</title>
    <link rel="stylesheet" href="/static/css/catalogo.css"> 
</head>
<body>
    <header class="header">
        <h1 class="origem">GARAGE 24</h1> 
        <nav class="menu">
            <ul class="menu">
                <li><a href="/catalogo">Catálogo</a></li>
                <li><a href="#">Sobre</a></li>
                <li><a href="#">Contato</a></li>
                <li><a href="/">Voltar ao Início</a></li>
            </ul>
        </nav>
    </header> 
    <hr>

    <form action="/catalogo" method="GET" id="form-filtro">
    <input type="text" name="busca" placeholder="Buscar pelo modelo" id="filtro" value="{{ busca }}">
</form>


 <div id="cards">
  {% for carro in carros %}
    <div class="card">
    <div style="position: relative;"> 
        <form id="delete-form-{{ carro.id }}" 
      action="/carros/{{ carro.id }}/delete?pagina={{ pagina }}" 
      method="POST" 
      class="delete-form">
    
    <button type="button" 
            class="btn-delete" 
            title="Excluir {{ carro.modelo }}" 
            onclick="event.stopPropagation(); confirmarExclusao('{{ carro.id }}', '{{ carro.modelo }}')">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <polyline points="3 6 5 6 21 6"></polyline>
            <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            <line x1="10" y1="11" x2="10" y2="17"></line>
            <line x1="14" y1="11" x2="14" y2="17"></line>
        </svg>
    </button>
</form>

        <a href="/carro/{{ carro.id }}" class="card-link">
            <img src="{{ carro.imagem }}" alt="Carro {{ carro.modelo }}">
        </a>
    </div>

    <a href="/carro/{{ carro.id }}" class="card-link">
        <p class="modelo">{{ carro.modelo }}</p>
        <p class="intro">A partir de:</p>
        <p class="preco">Por: R$ {{ carro.preco }}</p>
        <button class="btn">Inspecionar</button>
    </a>
</div>
  {% else %}
    <div style="text-align: center; width: 100%; padding: 50px;">
            <h2 style="color: red;">Nenhum carro encontrado para "{{ busca }}"</h2>
            <a href="/catalogo">Limpar busca</a>
        </div>
    {% endfor %}
</div>

<div class="paginacao-container">
    {% if pagina > 1 %}
        <a href="{{ url_for('catalogo', pagina=pagina-1, busca=busca) }}" class="btn-pag">« Anterior</a>
    {% else %}
        <span class="btn-desativado">« Anterior</span>
    {% endif %}

    <span class="pagina-info">Página {{ pagina }} de {{ total_paginas }}</span>

    {% if pagina < total_paginas %}
        <a href="{{ url_for('catalogo', pagina=pagina+1, busca=busca) }}" class="btn-pag">Próximo »</a>
    {% else %}
        <span class="btn-desativado">Próximo »</span>
    {% endif %}
</div>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="/static/js/catalogo.js"></script>
</body>

<footer>Garage 24 © 2025 — Projeto demonstrativo</footer>
</html>
